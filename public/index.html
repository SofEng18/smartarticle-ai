<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SmartArticle AI</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
  <style>
    body {
      font-family: 'Cairo', sans-serif;
      background: linear-gradient(to bottom left, #f0f4f8, #cbd5e1);
      min-height: 100vh;
    }
    #result {
      white-space: pre-wrap;
      word-wrap: break-word;
      background-color: #f9fafb;
      border: 1px solid #e5e7eb;
      padding: 1rem;
      border-radius: 0.75rem;
      height: 16rem;
      overflow-y: auto;
      position: relative;
    }
    #result::after {
      content: "";
      position: absolute;
      right: 1rem;
      bottom: 1rem;
      width: 10px;
      height: 10px;
      background-color: #3b82f6;
      border-radius: 50%;
      animation: blink 1s infinite;
    }
    @keyframes blink {
      0%, 100% { opacity: 0; }
      50% { opacity: 1; }
    }
  </style>
</head>
<body class="text-gray-800 flex flex-col justify-between">

  <header class="bg-gradient-to-r from-indigo-600 to-blue-500 shadow-md py-4">
    <div class="container mx-auto flex justify-between items-center px-4">
      <h1 class="text-2xl font-bold text-white">ğŸ§  SmartArticle AI</h1>
      <nav class="flex items-center gap-2">
        <!-- Changed "Ø§Ù„Ø£Ø³Ø¹Ø§Ø±" to "Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ" -->
        <a href="pricing.html" class="text-white hover:text-yellow-300 mx-2">ğŸ’° <span id="pricing-label">Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ</span></a>
        <label for="language" class="text-sm text-white mr-2 hidden sm:inline" id="lang-label">Ø§Ù„Ù„ØºØ©:</label>
        <select id="language" class="border rounded p-1 text-sm">
          <option value="ar">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</option>
          <option value="en">English</option>
          <option value="fr">FranÃ§ais</option>
        </select>
      </nav>
    </div>
  </header>

  <main class="container mx-auto px-4 py-8 flex-grow">
    <div class="bg-white p-6 rounded-2xl shadow-lg max-w-3xl mx-auto">
      <h2 class="text-xl font-bold mb-4 text-center text-gray-700" id="input-title">âœï¸ Ø£Ø¯Ø®Ù„ Ù…ÙˆØ¶ÙˆØ¹ Ø§Ù„Ù…Ù‚Ø§Ù„:</h2>
      <input id="topic" type="text" placeholder="Ù…Ø«Ø§Ù„: ØªØ£Ø«ÙŠØ± Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø¹Ù„Ù‰ Ø§Ù„ØªØ¹Ù„ÙŠÙ…"
             class="w-full p-3 rounded border focus:outline-none focus:ring-2 focus:ring-blue-400 mb-4">
      <div class="flex justify-between items-center mb-4">
        <label for="length" class="text-gray-700 text-base font-medium" id="length-label">Ø·ÙˆÙ„ Ø§Ù„Ù…Ù‚Ø§Ù„:</label>
        <select id="length" class="border rounded p-2 text-sm">
          <option value="short">Ù‚ØµÙŠØ±</option>
          <option value="medium" selected>Ù…ØªÙˆØ³Ø·</option>
          <option value="long">Ø·ÙˆÙŠÙ„</option>
        </select>
      </div>
      <button id="generate-button"
              class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-xl font-semibold w-full transition duration-300">
        ğŸš€ ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ù…Ù‚Ø§Ù„
      </button>
      <div id="result" class="mt-6 text-gray-800 transition-all duration-500">
        ğŸ“° Ø§Ù„Ù…Ù‚Ø§Ù„ Ø³ÙŠØ¸Ù‡Ø± Ù‡Ù†Ø§...
      </div>

      <!-- Social Share Icons with proper links -->
      <div class="flex justify-center space-x-4 mt-6 text-blue-600 text-xl rtl:space-x-reverse">
        <a href="https://wa.me/?text=Check%20this%20article" title="Ø´Ø§Ø±Ùƒ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨" target="_blank"><i class="fab fa-whatsapp"></i></a>
        <a href="https://www.facebook.com/sharer/sharer.php?u=https://smartarticle.example" title="Ø´Ø§Ø±Ùƒ Ø¹Ø¨Ø± ÙÙŠØ³Ø¨ÙˆÙƒ" target="_blank"><i class="fab fa-facebook"></i></a>
        <a href="https://twitter.com/intent/tweet?url=https://smartarticle.example" title="Ø´Ø§Ø±Ùƒ Ø¹Ø¨Ø± ØªÙˆÙŠØªØ±" target="_blank"><i class="fab fa-twitter"></i></a>
        <a href="https://t.me/share/url?url=https://smartarticle.example" title="Ø´Ø§Ø±Ùƒ Ø¹Ø¨Ø± ØªÙŠÙ„ÙŠØ¬Ø±Ø§Ù…" target="_blank"><i class="fab fa-telegram"></i></a>
        <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://smartarticle.example" title="Ø´Ø§Ø±Ùƒ Ø¹Ø¨Ø± Ù„ÙŠÙ†ÙƒØ¯Ø¥Ù†" target="_blank"><i class="fab fa-linkedin"></i></a>
      </div>
    </div>
  </main>

  <footer class="bg-gradient-to-r from-indigo-600 to-blue-500 shadow-inner py-4 mt-6">
    <div class="container mx-auto text-center text-sm text-white font-semibold">
      Nadim Al-Selwi Â© 2025 SmartArticle AI
    </div>
  </footer>

  <script>
    let currentLanguage = "ar";
    const topicInput = document.getElementById("topic");
    const resultBox = document.getElementById("result");
    const lengthSelect = document.getElementById("length");
    const lengthLabel = document.getElementById("length-label");

    const messages = {
      ar: {
        placeholder: "Ù…Ø«Ø§Ù„: ØªØ£Ø«ÙŠØ± Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø¹Ù„Ù‰ Ø§Ù„ØªØ¹Ù„ÙŠÙ…",
        loading: "â³ Ø¬Ø§Ø±ÙŠ ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ù…Ù‚Ø§Ù„...",
        result: "ğŸ“° Ø§Ù„Ù…Ù‚Ø§Ù„ Ø³ÙŠØ¸Ù‡Ø± Ù‡Ù†Ø§...",
        empty: "ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ù…ÙˆØ¶ÙˆØ¹ Ø§Ù„Ù…Ù‚Ø§Ù„",
        inputTitle: "âœï¸ Ø£Ø¯Ø®Ù„ Ù…ÙˆØ¶ÙˆØ¹ Ø§Ù„Ù…Ù‚Ø§Ù„:",
        lengthLabel: "Ø·ÙˆÙ„ Ø§Ù„Ù…Ù‚Ø§Ù„:",
        pricing: "Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ",
        button: "ğŸš€ ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ù…Ù‚Ø§Ù„"
      },
      en: {
        placeholder: "Example: The impact of AI on education",
        loading: "â³ Generating the article...",
        result: "ğŸ“° The article will appear here...",
        empty: "Please enter an article topic",
        inputTitle: "âœï¸ Enter the article topic:",
        lengthLabel: "Article length:",
        pricing: "Subscribe",
        button: "ğŸš€ Generate Article"
      },
      fr: {
        placeholder: "Exemple : Lâ€™impact de lâ€™IA sur lâ€™Ã©ducation",
        loading: "â³ GÃ©nÃ©ration de lâ€™article en cours...",
        result: "ğŸ“° Lâ€™article apparaÃ®tra ici...",
        empty: "Veuillez entrer un sujet dâ€™article",
        inputTitle: "âœï¸ Saisissez le sujet de lâ€™article :",
        lengthLabel: "Longueur de lâ€™article :",
        pricing: "S'abonner",
        button: "ğŸš€ GÃ©nÃ©rer lâ€™article"
      }
    };

    const lengthOptions = {
      ar: { short: "Ù‚ØµÙŠØ±", medium: "Ù…ØªÙˆØ³Ø·", long: "Ø·ÙˆÙŠÙ„", label: "Ø·ÙˆÙ„ Ø§Ù„Ù…Ù‚Ø§Ù„:" },
      en: { short: "Short", medium: "Medium", long: "Long", label: "Article length:" },
      fr: { short: "Court", medium: "Moyen", long: "Long", label: "Longueur de lâ€™article :" }
    };

    function adjustLanguageUI(lang) {
      topicInput.placeholder = messages[lang].placeholder;
      resultBox.innerHTML = messages[lang].result;
      document.getElementById("input-title").innerText = messages[lang].inputTitle;
      document.getElementById("generate-button").innerText = messages[lang].button;
      document.getElementById("pricing-label").innerText = messages[lang].pricing;

      const opts = lengthOptions[lang];
      lengthLabel.textContent = opts.label;
      lengthSelect.innerHTML = `
        <option value="short">${opts.short}</option>
        <option value="medium" selected>${opts.medium}</option>
        <option value="long">${opts.long}</option>
      `;
    }

    function updatePageDirection(lang) {
      const html = document.documentElement;
      html.lang = lang;
      html.dir = lang === "ar" ? "rtl" : "ltr";
      document.body.style.direction = lang === "ar" ? "rtl" : "ltr";
      document.body.style.textAlign = lang === "ar" ? "right" : "left";
      topicInput.style.direction = lang === "ar" ? "rtl" : "ltr";
      topicInput.style.textAlign = lang === "ar" ? "right" : "left";
      resultBox.style.direction = lang === "ar" ? "rtl" : "ltr";
      resultBox.style.textAlign = lang === "ar" ? "right" : "left";
    }

    document.getElementById("language").addEventListener("change", (e) => {
      currentLanguage = e.target.value;
      adjustLanguageUI(currentLanguage);
      updatePageDirection(currentLanguage);
    });

    document.getElementById("generate-button").addEventListener("click", async () => {
      const topic = topicInput.value.trim();
      resultBox.innerHTML = "";

      if (!topic) {
        alert(messages[currentLanguage].empty);
        resultBox.innerHTML = messages[currentLanguage].result;
        return;
      }

      try {
        resultBox.innerHTML = messages[currentLanguage].loading;

        const response = await fetch("/generate", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ topic, language: currentLanguage, length: lengthSelect.value })
        });

        if (!response.ok || !response.body) {
          resultBox.innerHTML = '<span class="text-red-600">âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…</span>';
          return;
        }

        const reader = response.body.getReader();
        const decoder = new TextDecoder("utf-8");
        resultBox.innerHTML = "";

        while (true) {
          const { done, value } = await reader.read();
          if (done) break;
          const chunk = decoder.decode(value, { stream: true });
          resultBox.innerHTML += chunk;
          resultBox.scrollTop = resultBox.scrollHeight;
        }

      } catch (err) {
        resultBox.innerHTML = `<span class="text-red-600">âŒ ${err.message}</span>`;
      }
    });

    adjustLanguageUI(currentLanguage);
    updatePageDirection(currentLanguage);
  </script>
</body>
</html>
